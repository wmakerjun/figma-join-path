# Figma Join Paths Plugin

피그마에서 끊어진 벡터 패스들을 자동으로 연결해주는 플러그인입니다.
일러스트레이터의 `Cmd+J` (Join) 기능과 유사하게 동작합니다.

## 주요 기능

### 1. 패스 연결 (Vertex 병합)
- **끝점-끝점 연결**: 가장 가까운 끝점끼리 하나의 vertex로 병합
- **끝점-선분 연결**: 끝점을 선분 위에 연결 (선분 분할)
- 병합된 vertex를 이동하면 연결된 패스가 함께 움직임

### 2. 연결 해제 (분기점 분리)
- 병합된 vertex(분기점)를 다시 분리
- 3개 이상의 segment가 연결된 vertex를 개별 vertex로 분리

### 3. 디버그 모드
- 단계별 실행으로 동작 확인 가능
- Flatten → 끝점 분석 → Vertex 병합 순서로 테스트

## 설치 방법

### 방법 1: 로컬 설치 (개발용)

1. 이 저장소를 클론합니다:
   ```bash
   git clone https://github.com/wmakerjun/figma-join-path.git
   cd figma-join-path
   ```

2. 의존성을 설치합니다:
   ```bash
   npm install
   ```

3. 빌드합니다:
   ```bash
   npm run build
   ```

4. Figma 데스크톱 앱에서 플러그인을 로드합니다:
   - `Plugins` → `Development` → `Import plugin from manifest...`
   - 이 폴더의 `manifest.json` 파일 선택

### 방법 2: 개발 모드로 실행

```bash
npm run watch  # 파일 변경 감지 및 자동 빌드
```

## 사용 방법

### 기본 사용법

1. **벡터 2개 이상 선택**
2. `Plugins` → `Development` → `패스 연결 (Join Paths)` 실행
3. 옵션 설정:
   - **최대 연결 거리**: 연결할 끝점 간 최대 거리 (px)
   - **거리 제한 없음**: 체크하면 거리 무제한
   - **선분 위에도 연결**: 끝점을 선분 중간에 연결
4. **패스 연결** 버튼 클릭

### 연결 해제

1. **연결된 벡터 1개 이상 선택**
2. **연결 해제 (분기점 분리)** 버튼 클릭
3. 분기점(3개 이상 연결된 vertex)이 분리됨

### 디버그 모드

복잡한 경우 단계별로 확인할 수 있습니다:

1. **1. Flatten만**: 선택한 벡터들을 하나로 합침
2. **2. 끝점 분석**: 끝점 개수와 좌표 확인
3. **3. Vertex 병합**: 실제 병합 수행

## 옵션 설명

| 옵션 | 설명 |
|------|------|
| 최대 연결 거리 | 이 거리 이내의 끝점만 연결 (1-1000px) |
| 거리 제한 없음 | 체크 시 거리 무제한으로 연결 |
| 선분 위에도 연결 | 끝점을 다른 패스의 선분 중간에 연결 |
| 원본 벡터 병합 | 선택한 벡터들을 하나의 벡터로 합침 |

## 동작 원리

```
연결 전:                    연결 후:
●────────●  ●────────●     ●────────●────────●
   패스1       패스2           하나의 패스

끝점-선분 연결:
       ●                         ●
       │                        /
●──────┼──────●    →    ●─────●─────●
       │                        \
       ●                         ●
```

## 기술 스택

- Figma Plugin API
- TypeScript
- esbuild (번들링)

## 파일 구조

```
figma-join-path/
├── manifest.json     # 플러그인 설정
├── code.ts          # 메인 로직 (TypeScript)
├── code.js          # 빌드된 메인 로직
├── ui.html          # 플러그인 UI
├── package.json     # npm 설정
└── tsconfig.json    # TypeScript 설정
```

## 라이선스

MIT
